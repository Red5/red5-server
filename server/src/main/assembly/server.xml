<assembly
    xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3 http://maven.apache.org/xsd/assembly-1.1.3.xsd">
    <id>${project.version}</id>
    <formats>
        <format>tar.gz</format>
        <format>zip</format>
    </formats>
    <files>
        <file>
            <source>${project.build.directory}/${finalName}.jar</source>
            <outputDirectory></outputDirectory>
            <destName>red5-server.jar</destName>
        </file>
    </files>
    <fileSets>
        <fileSet>
            <directory>${project.basedir}</directory>
            <outputDirectory></outputDirectory>
            <includes>
                <include>license.txt</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.build.directory}/red5-service-${red5-service.version}</directory>
            <outputDirectory></outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${project.build.directory}/lib</directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
            <excludes>
                <exclude>ecj-*.jar</exclude>
                <exclude>tomcat-*.jar</exclude>
                <exclude>tomcatplugin-*.jar</exclude>
                <exclude>websocket-*.jar</exclude>
                <exclude>antlr-2.7.7.jar</exclude>
                <exclude>asm-analysis-4.0.jar</exclude>
                <exclude>asm-commons-4.0.jar</exclude>
                <exclude>asm-tree-4.0.jar</exclude>
                <exclude>asm-util-4.0.jar</exclude>
                <exclude>commons-daemon-*.jar</exclude>
                <exclude>commons-logging-*.jar</exclude>
                <exclude>hamcrest-core-*.jar</exclude>
                <exclude>servlet-api-*.jar</exclude>
                <exclude>junit-${junit.version}.jar</exclude>
                <exclude>logback-access-*.jar</exclude>
                <exclude>red5-service-${red5-service.version}.jar</exclude>
                <exclude>red5-server-1*.jar</exclude>
            </excludes>
        </fileSet>
        <fileSet>
            <directory>${project.build.directory}/plugins</directory>
            <outputDirectory>plugins</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
            <excludes>
                <exclude>red5-server-*.jar</exclude>
                <exclude>red5-service-*.jar</exclude>
                <exclude>servlet-api-*.jar</exclude>
                <exclude>javassist-*.jar</exclude>
                <exclude>mina-*.jar</exclude>
                <exclude>ognl-*.jar</exclude>
                <exclude>sysout-over-*.jar</exclude>
                <exclude>spring-webmvc-*.jar</exclude>
                <exclude>tomcat-embed-logging-log4j-*.jar</exclude>
                <exclude>cors-filter-*.jar</exclude>
                <exclude>java-property-utils-*.jar</exclude>
            </excludes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/server</directory>
            <outputDirectory></outputDirectory>
            <includes>
                <include>*.bat</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/server</directory>
            <outputDirectory></outputDirectory>
            <fileMode>0755</fileMode>
            <includes>
                <include>*.sh</include>
            </includes>
            <filtered>true</filtered>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/server/conf</directory>
            <outputDirectory>conf</outputDirectory>
            <includes>
                <include>*.xml</include>
                <include>*.properties</include>
                <include>*.policy</include>
                <include>*.globals</include>
                <include>*.jmx</include>
            </includes>
            <excludes>
                <exclude>build_standalone.properties</exclude>
            </excludes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps</directory>
            <outputDirectory>webapps</outputDirectory>
            <includes>
                <include>*.xml</include>
            </includes>
        </fileSet>
        <!-- ROOT -->
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps/root</directory>
            <outputDirectory>webapps/root</outputDirectory>
            <includes>
                <include>*.xml</include>
                <include>*.jsp</include>
                <include>*.html</include>
                <include>*.ico</include>
                <include>*.png</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps/root/WEB-INF</directory>
            <outputDirectory>webapps/root/WEB-INF</outputDirectory>
            <includes>
                <include>*.xml</include>
                <include>*.properties</include>
            </includes>
        </fileSet>
        <!-- Demos -->
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps/root/demos</directory>
            <outputDirectory>webapps/root/demos</outputDirectory>
            <includes>
                <include>*.html</include>
                <include>*.xml</include>
                <include>*.js</include>
                <include>*.swf</include>
                <include>*.air</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps/root/demos/assets</directory>
            <outputDirectory>webapps/root/demos/assets</outputDirectory>
            <includes>
                <include>*.js</include>
                <include>*.swf</include>
            </includes>
        </fileSet>
        <!-- Live -->
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps/live/WEB-INF</directory>
            <outputDirectory>webapps/live/WEB-INF</outputDirectory>
            <includes>
                <include>*.xml</include>
                <include>*.properties</include>
            </includes>
        </fileSet>
        <!-- VOD -->
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps/vod</directory>
            <outputDirectory>webapps/vod</outputDirectory>
            <includes>
                <include>*.html</include>
                <include>*.js</include>
                <include>*.swf</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps/vod/WEB-INF</directory>
            <outputDirectory>webapps/vod/WEB-INF</outputDirectory>
            <includes>
                <include>*.xml</include>
                <include>*.properties</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps/vod/streams</directory>
            <outputDirectory>webapps/vod/streams</outputDirectory>
            <includes>
                <include>*.flv</include>
            </includes>
        </fileSet>
        <!-- oflaDemo -->
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps/oflaDemo</directory>
            <outputDirectory>webapps/oflaDemo</outputDirectory>
        </fileSet>
        <!-- SOSample -->
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps/SOSample</directory>
            <outputDirectory>webapps/SOSample</outputDirectory>
        </fileSet>
        <!-- Websocket chat -->
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps/chat</directory>
            <outputDirectory>webapps/chat</outputDirectory>
            <includes>
                <include>*.html</include>
                <include>*.js</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/server/webapps/chat/WEB-INF</directory>
            <outputDirectory>webapps/chat/WEB-INF</outputDirectory>
            <includes>
                <include>**/*.xml</include>
                <include>**/*.properties</include>
                <include>**/*.jar</include>
                <include>**/*.class</include>
            </includes>
        </fileSet>
    </fileSets>
</assembly>
